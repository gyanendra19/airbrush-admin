<!-- Light Modern Admin Sidebar (No Underlines) -->
<div class="sidebar bg-white shadow-sm">
  <!-- Sidebar Header -->
  <div class="sidebar-header d-flex justify-content-between align-items-center p-4 border-bottom">
    <h3 class="mb-0 fs-5 fw-semibold text-dark">
      <i class="bi bi-speedometer2 me-2 text-primary"></i>Admin Panel
    </h3>
    <button class="sidebar-toggle btn btn-sm btn-outline-secondary d-lg-none">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <!-- User Profile -->
  <div class="sidebar-user p-4 text-center border-bottom">
    <div class="user-avatar mx-auto mb-3">
      <img src="/img/avatar.jpg" 
           class="rounded-circle object-fit-contain" 
           alt="Admin Avatar">
    </div>
    <div class="user-info">
      <h5 class="mb-1 fw-semibold">Admin User</h5>
      <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill">Administrator</span>
    </div>
  </div>

  <!-- Navigation Menu -->
  <ul class="sidebar-nav list-unstyled px-3 py-3">
    <!-- Dashboard -->
    <li class="nav-item mb-2">
      <a href="/" class="nav-link px-3 py-2 rounded-3 d-flex align-items-center active text-decoration-none">
        <i class="bi bi-house-door me-3 text-primary"></i>
        <span>Dashboard</span>
        <span class="ms-auto badge bg-primary text-white">5</span>
      </a>
    </li>

    <!-- Categories Dropdown -->
    <li class="nav-item mb-2">
      <div class="accordion" id="categoriesAccordion">
        <div class="accordion-item border-0 bg-transparent">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed px-2 py-2 bg-white text-dark shadow-none text-decoration-none" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#categoriesCollapse">
                {{!-- <i class="bi bi-collection me-3 text-primary"></i> --}}
              <span>Categories</span>
              <i class="bi bi-chevron-down ms-auto transition-all"></i>
            </button>
          </h2>
          <div id="categoriesCollapse" class="accordion-collapse collapse" data-bs-parent="#categoriesAccordion">
            <div class="accordion-body p-0 pt-2">
              <!-- Dynamic Categories -->
              <div id="dynamic-categories">
                <!-- Categories will be rendered here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </li>

    <!-- New Category -->
    <li class="nav-item mb-2">
      <a href="/new-category" class="nav-link px-2 py-2 rounded-3 d-flex align-items-center text-decoration-none">
        {{!-- <i class="bi bi-plus-circle me-3 text-primary"></i> --}}
        <span>New Category</span>
      </a>
    </li>

    <!-- Users -->
    <li class="nav-item mb-2">
      <a href="/users" class="nav-link px-2 py-2 rounded-3 d-flex text-decoration-none">
        {{!-- <i class="bi bi-people me-3 text-primary"></i> --}}
        <span>User Management</span>
      </a>
    </li>

    <!-- Settings -->
    <li class="nav-item mb-2">
      <a href="/settings" class="nav-link px-2 py-2 rounded-3 d-flex text-decoration-none">
        {{!-- <i class="bi bi-gear me-3 text-primary"></i> --}}
        <span>System Settings</span>
      </a>
    </li>
  </ul>

  <!-- Sidebar Footer -->
  <div class="sidebar-footer p-4 border-top">
    <a href="/logout" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-center text-decoration-none">
      <i class="bi bi-box-arrow-right me-2"></i> Sign Out
    </a>
  </div>
</div>

<!-- CSS to ensure no underlines appear on hover/active -->
<style>
  .sidebar a,
  .sidebar button {
    text-decoration: none !important;
  }
  
  .sidebar {
    width: 260px;
    height: 100vh;
    position: fixed;
  }
  
  .nav-link:hover {
    background: rgba(13, 110, 253, 0.05);
  }
  
  .nav-link.active {
    background: rgba(13, 110, 253, 0.1);
    border-left: 3px solid var(--bs-primary);
    color: var(--bs-primary);
  }
  
  .accordion-button:not(.collapsed) {
    background: rgba(13, 110, 253, 0.05);
    color: var(--bs-primary);
  }
  
  .accordion-button:not(.collapsed) .bi-chevron-down,
  .submenu-toggle[aria-expanded="true"] .bi-chevron-down {
    transform: rotate(180deg);
  }
  
  .submenu-item a:not(.submenu-toggle):hover {
    background: rgba(13, 110, 253, 0.05);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Define categories and their sections
    const categories = [
      {
        id: '3dSubmenu',
        name: '3D Images',
        icon: 'bi-film',
        href: '#3dSubmenu',
        sections: [
          { name: 'Hero Section', href: '/hero-section', contentId: '68049ec8a4c47b1127e4d533' },
          { name: 'Images Gallery', href: '/images-gallery', contentId: '6805028d386a5fc127d44a84' },
          { name: 'why Use Tool', href: '/why-use-tool', contentId: "68060897529304e58e885c7b"  },
          { name: 'Text to Anything', href: '/text-to-anything', contentId: '68050d5e386a5fc127d44add' },
          { name: 'Blogs', href: '/blogs', contentId: '680693c1fed139cd60415c19' }
        ]
      },
      {
        id: 'ghibliSubmenu',
        name: 'Ghibli',
        icon: 'bi-box-seam',
        href: '#ghibliSubmenu',
        sections: [
          { name: 'Hero Section', href: '/hero-section', contentId: '680545ef386a5fc127d44b64' },
          { name: 'Images Gallery', href: '/images-gallery', contentId: "6805475b386a5fc127d44b72" },
          { name: 'Why Use Tool', href: '/why-use-tool', contentId: "680623db2de273de22a536e4" },
          { name: 'Text to Anything', href: '/text-to-anything', contentId: "680547a6386a5fc127d44b7c" },
          { name: 'Blogs', href: '/blogs'}
        ]
      }
    ];
    
    // Render categories to the sidebar
    const renderCategories = () => {
      const dynamicCategoriesContainer = document.getElementById('dynamic-categories');
      if (!dynamicCategoriesContainer) return;
      
      // Clear the container
      dynamicCategoriesContainer.innerHTML = '';
      
      // Add each category
      categories.forEach(category => {
        const isOpen = category.id === '3dSubmenu'; // Default open for 3D Images
        
        const categoryHTML = `
          <div class="submenu-item mb-2">
            <a class="d-flex align-items-center px-3 py-1 text-dark rounded-3 submenu-toggle text-decoration-none" 
               data-bs-toggle="collapse"
               href="${category.href}">
              {{!-- <i class="bi ${category.icon} me-3 text-primary"></i> --}}
              <span>${category.name}</span>
              <i class="bi bi-chevron-down ms-auto transition-all" style="transform: rotate(${isOpen ? '180deg' : '0'});"></i>
            </a>
            <div class="collapse${isOpen ? ' show' : ''} ps-4" id="${category.id}">
              <ul class="list-unstyled mt-2">
                ${category.sections.map(section => {
                  // Add the content ID as a query parameter if available
                  const href = section.contentId ? 
                    `${section.href}?id=${section.contentId}&category=${category.name.toLowerCase().replace(/\s+/g, '-')}` : 
                    section.href;
                  
                  return `<li><a href="${href}" class="d-block px-3 py-1 rounded-3 text-decoration-none">${section.name}</a></li>`;
                }).join('')}
              </ul>
            </div>
          </div>
        `;
        
        dynamicCategoriesContainer.innerHTML += categoryHTML;
      });
      
      // Set up collapse toggle event listeners
      document.querySelectorAll('.submenu-toggle').forEach(toggle => {
        toggle.addEventListener('click', function() {
          const chevron = this.querySelector('.bi-chevron-down');
          const target = document.querySelector(this.getAttribute('href'));
          
          // Toggle rotation based on target's expanded state
          if (target) {
            setTimeout(() => {
              const isExpanded = target.classList.contains('show');
              chevron.style.transform = isExpanded ? 'rotate(180deg)' : 'rotate(0)';
            }, 50);
          }
        });
      });
    };
    
    // Initialize the sidebar
    renderCategories();
  });
</script>